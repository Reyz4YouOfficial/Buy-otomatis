<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Au Ah Pengen Beli Truk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: radial-gradient(circle at top right, #1e1b4b, #0f172a); min-height: 100vh; color: white; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
    </style>
</head>
<body class="flex items-center justify-center p-6">
    <div class="glass max-w-md w-full rounded-3xl p-8 shadow-2xl">
        <h1 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 text-center mb-6">Reyz4YouStore</h1>
        <div class="space-y-4">
            <div>
                <label class="text-xs font-semibold text-slate-400 uppercase tracking-widest">Username Panel</label>
                <input type="text" id="user" placeholder="Username..." class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 mt-1 text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all">
            </div>
            <div>
                <label class="text-xs font-semibold text-slate-400 uppercase tracking-widest">Pilih Kapasitas RAM</label>
                <select id="ram" onchange="updateHarga()" class="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3 mt-1 outline-none cursor-pointer text-white">
                    <option value="1">1 GB RAM - Rp 1.000</option>
                    <option value="2">2 GB RAM - Rp 2.000</option>
                    <option value="3">3 GB RAM - Rp 3.000</option>
                    <option value="4">4 GB RAM - Rp 4.000</option>
                    <option value="5">5 GB RAM - Rp 5.000</option>
                    <option value="6">6 GB RAM - Rp 6.000</option>
                    <option value="7">7 GB RAM - Rp 7.000</option>
                    <option value="8">8 GB RAM - Rp 8.000</option>
                    <option value="9">9 GB RAM - Rp 9.000</option>
                    <option value="10">10 GB RAM - Rp 10.000</option>
                    <option value="unlimited">Unlimited RAM - Rp 12.000</option>
                </select>
            </div>
            <div class="bg-blue-500/10 border border-blue-500/20 rounded-2xl p-4 text-center">
                <span class="text-2xl font-bold text-blue-400">Total: Rp <span id="displayHarga">1.000</span></span>
            </div>
            <button onclick="bayarSekarang()" id="btnText" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:scale-[1.02] active:scale-95 text-white font-bold py-4 rounded-xl shadow-lg transition-all">
                Bayar Sekarang
            </button>
        </div>
    </div>
    <script>
        function updateHarga() {
            const ram = document.getElementById('ram').value;
            let total = ram === "unlimited" ? 12000 : parseInt(ram) * 1000;
            document.getElementById('displayHarga').innerText = total.toLocaleString('id-ID');
        }
        async function bayarSekarang() {
            const username = document.getElementById('user').value;
            const ramChoice = document.getElementById('ram').value;
            if(!username) return alert("Isi username!");
            document.getElementById('btnText').innerText = "Mengarahkan...";
            const res = await fetch('/buy', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ username, ramChoice })
            });
            const data = await res.json();
            if(data.success) window.location.href = data.paymentUrl;
        }
    </script>
</body>
</html>
